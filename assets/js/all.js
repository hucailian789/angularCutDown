!function(e){e.module("moviecat",["moviecat_home","mo_details","moviecat_movie_list"]).controller("searchCtrl",["$scope","$window",function(e,o){e.query=function(){var t=e.keyworld;o.location.hash="#/search?q="+t}}])}(angular),function(e){var o=e.module("mo_details",["ngRoute","myApp"]);o.config(["$routeProvider",function(e){e.when("/details/:id",{templateUrl:"./details/details.html",controller:"detailsController"})}]),o.controller("detailsController",["$scope","myjsonp","$routeParams",function(e,o,t){o({url:"http://api.douban.com/v2/movie/subject/"+t.id,method:"get",params:{},callback:function(o){e.movie=o,e.isShow=!1,e.$apply()}})}])}(angular),(function(e){var o=e.module("moviecat_home",["ngRoute"]);o.config(["$locationProvider",function(e){e.hashPrefix("")}]),o.config(["$routeProvider",function(e){e.when("/home",{templateUrl:"./home/home.html"}).when("/",{redirectTo:"/home"})}])})(angular),function(e){var o=e.module("moviecat_movie_list",["myApp","ngRoute"]);o.config(["$routeProvider",function(e){e.when("/:movieType/:page?",{templateUrl:"./movie_list/movie_list.html",controller:"movie_listController"})}]),o.directive("mvActive",function(){return{restrict:"A",link:function(e,o,t){o.on("click",function(){o.parent().children().removeClass("active"),o.addClass("active")})}}}),o.controller("movie_listController",["$scope","myjsonp","$routeParams","$route","$window",function(e,o,t,n,a){e.pageSize=10,e.pageIndex=(t.page||"1")-0,o({url:"http://api.douban.com/v2/movie/"+t.movieType,params:{count:e.pageSize,start:(e.pageIndex-1)*e.pageSize,q:t.q},callback:function(o){e.movie=o,e.pageCount=a.Math.ceil(o.total/e.pageSize),e.isShow=!1,e.$apply()}}),e.getPage=function(o){o<1||o>e.pageCount||n.updateParams({page:o})}}])}(angular),function(e){var o=1;e.module("myApp",[]).factory("myjsonp",["$window",function(e){return function(t){var n=t.url+"?";for(var a in t.params)n+=a+"="+t.params[a]+"&";var i="myjsonp_"+o++;window[i]=t.callback,n+="callback="+i;var r=e.document.createElement("script");r.src=n,e.document.body.appendChild(r)}}])}(angular);